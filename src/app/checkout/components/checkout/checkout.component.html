<div class="page-wrapper mt-5">
  <main class="main pt-5">
    <div class="page-content">
      <div class="checkout">
        <div class="container">
          <form action="#">
            <div class="row">
              <div class="col-lg-9">
                <h2 class="checkout-title">Billing Details</h2>
                <!-- End .checkout-title -->

                <mat-horizontal-stepper labelPosition="bottom" #stepper linear>
                <mat-step
                [stepControl]="addressForm"
                  label="Address"
                  state="home">
                  <form [formGroup]="addressForm" class="mt-1" >
                    <div class="row">
                      <div class="col-sm-6">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>First Name</mat-label>
                          <input matInput formControlName="firstName" [class.is-valid]="addressForm.controls['firstName'].touched" />
                          <mat-hint
                            *ngIf="addressForm.controls['firstName'].invalid && addressForm.controls['firstName'].touched">
                            <p class="text-red" *ngIf="addressForm.controls['firstName'].errors?.['required']">
                              <mat-icon class="text-red mr-1" style="vertical-align: middle">error</mat-icon>
                              Enter first name
                            </p>
                            <p class="text-red" *ngIf="addressForm.controls['firstName'].errors?.['pattern']">
                              <mat-icon class="text-red mr-1" style="vertical-align: middle">error</mat-icon>
                              Enter Valid name
                            </p>
                          </mat-hint>
                        </mat-form-field>
                      </div>
                      <!-- End .col-sm-6 -->

                      <div class="col-sm-6">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>Last Name</mat-label>
                          <input matInput formControlName="lastName" />
                          <mat-hint *ngIf="addressForm.controls['lastName'].invalid && addressForm.controls['lastName'].touched">
                            <p
                              class="text-red"
                              *ngIf="addressForm.controls['lastName'].errors?.['required']"
                            >
                            <mat-icon class="text-red mr-1" style="vertical-align: middle">error</mat-icon>
                              Last name is required
                            </p>

                            <p
                            class="text-red"
                            *ngIf="addressForm.controls['lastName'].errors?.['pattern']"
                          >
                          <mat-icon class="text-red mr-1" style="vertical-align: middle">error</mat-icon>
                            Enter valid name
                          </p>

                          </mat-hint>
                        </mat-form-field>
                      </div>
                      <!-- End .col-sm-6 -->

                      <div class="col-sm-6 mt-1">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>Country</mat-label>
                           <mat-select formControlName="country">
                            <mat-option value="one">Egypt</mat-option>
                            <mat-option value="US">US</mat-option>
                            <mat-option value="one">China</mat-option>
                            <mat-option value="one">Canada</mat-option>
                            <mat-option value="two">Island</mat-option>
                            <mat-option value="one">Germany</mat-option>
                            <mat-option value="two">Japan</mat-option>
                            <mat-option value="one">Korea</mat-option>
                            <mat-option value="two">South Africa</mat-option>
                            <mat-option value="two">Denemark</mat-option>
                          </mat-select>
                          <mat-hint
                            *ngIf="addressForm.controls['country'].invalid && addressForm.controls['country'].touched">
                            <p class="text-red" *ngIf="addressForm.controls['country'].errors?.['required']">
                            <mat-icon
                            class="text-red mr-1"
                            style="vertical-align: middle"
                            >error</mat-icon
                          >
                            Country is required
                            </p>
                          </mat-hint>
                        </mat-form-field>
                      </div>
                      <!-- End .col-sm-6 -->

                      <div class="col-sm-6 mt-1">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>City</mat-label>
                          <input matInput formControlName="city" />
                          <mat-hint *ngIf="addressForm.controls['city'].invalid && addressForm.controls['city'].touched">
                            <p class="text-red" *ngIf="addressForm.controls['city'].errors?.['required']">
                            <mat-icon
                            class="text-red mr-1"
                            style="vertical-align: middle">error</mat-icon
                            >
                              City is required
                            </p>
                            <p class="text-red" *ngIf="addressForm.controls['city'].errors?.['pattern']">
                              <mat-icon
                              class="text-red mr-1"
                              style="vertical-align: middle">error</mat-icon
                              >
                                Enter valid city
                            </p>
                          </mat-hint>
                        </mat-form-field>
                      </div>

                      <div class="col-sm-6 mt-1">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>Street</mat-label>
                          <input matInput formControlName="street" />
                          <mat-hint *ngIf="addressForm.controls['street'].invalid && addressForm.controls['street'].touched">
                            <p class="text-red" *ngIf="addressForm.controls['street'].errors?.['required']">
                            <mat-icon class="text-red mr-1" style="vertical-align: middle">error</mat-icon>
                            Street is required
                            </p>
                            <p class="text-red" *ngIf="addressForm.controls['street'].errors?.['pattern']">
                              <mat-icon class="text-red mr-1" style="vertical-align: middle">error</mat-icon>
                              Enter valid street
                              </p>

                          </mat-hint>
                        </mat-form-field>
                      </div>
                      <!-- End .col-sm-12 -->



                      <div class="col-sm-6 mt-1">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>ZIP Code</mat-label>
                          <input matInput formControlName="ZIP" />
                          <mat-hint
                            *ngIf="addressForm.controls['ZIP'].invalid && addressForm.controls['ZIP'].touched">
                            <p class="text-red" *ngIf="addressForm.controls['ZIP'].errors?.['required']">
                            <mat-icon
                            class="text-red mr-1"
                            style="vertical-align: middle">error</mat-icon>
                            ZIP Code is required
                            </p>
                            <p class="text-red" *ngIf="addressForm.controls['ZIP'].errors?.['pattern']">
                              <mat-icon
                              class="text-red mr-1"
                              style="vertical-align: middle">error</mat-icon>
                              Enter valid ZIP Code
                              </p>
                          </mat-hint>
                        </mat-form-field>
                      </div>


                      <div class="col-sm-6 mt-1 mb-2">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>Phone</mat-label>
                          <input matInput formControlName="phone" />
                          <mat-hint
                            *ngIf="addressForm.controls['phone'].invalid && addressForm.controls['phone'].touched">
                            <p
                              class="text-red" *ngIf="addressForm.controls['phone'].errors?.['required']">
                            <mat-icon
                            class="text-red mr-1"
                            style="vertical-align: middle">error</mat-icon>
                            Phone is required
                            </p>

                            <p
                            class="text-red" *ngIf="addressForm.controls['phone'].errors?.['pattern']">
                          <mat-icon
                          class="text-red mr-1"
                          style="vertical-align: middle">error</mat-icon>
                          Enter valid Phone
                          </p>
                          </mat-hint>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-6 mt-1">
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>Email</mat-label>
                          <input matInput formControlName="email" />
                          <mat-hint
                            *ngIf="addressForm.controls['email'].invalid && addressForm.controls['email'].touched"
                          >
                            <p class="text-red" *ngIf="addressForm.controls['email'].errors?.['required']"
                            >
                            <mat-icon
                            class="text-red mr-1"
                            style="vertical-align: middle">error</mat-icon
                            >
                            Email adddress is required
                            </p>

                            <p
                            class="text-red" *ngIf="addressForm.controls['email'].errors?.['email']">
                          <mat-icon
                          class="text-red mr-1"
                          style="vertical-align: middle">error</mat-icon>
                          Enter valid Email
                          </p>
                          </mat-hint>
                        </mat-form-field>
                      </div>
                    </div>
                    <!-- End .row -->
                    <div>
                      <button mat-raised-button matStepperNext color="primary">Next</button>
                    </div>
                  </form>
                </mat-step>
                <mat-step [stepControl]="deliveryForm" label="Delivery" state="delivery">
                  <form [formGroup]="deliveryForm" class="mt-1">
                    <mat-radio-group *ngIf="deliverMethod$|async as deliveryMethods" formControlName="deliveryMethod"  color="primary" style="vertical-align: top;" aria-labelledby="example-radio-group-label"
                    class="example-radio-group bg-danger" [(ngModel)]="selectedDeliveryMethod" >
                    <div class="row">
                      <mat-radio-button class="example-radio-button col-sm-6" *ngFor="let deliveryMethod of deliveryMethods" [value]="deliveryMethod.shortName" (change)="getDeliveryMethod(deliveryMethod)">
                       <strong class="">{{deliveryMethod.shortName}}-{{deliveryMethod.price|currency}}</strong>
                       <p class="">{{deliveryMethod.description}}</p>
                      </mat-radio-button>
                    </div>


                  </mat-radio-group>
                  </form>
                  <div class="mt-3">
                    <button  mat-raised-button matStepperPrevious color="primary" class="mr-2">Back</button>
                    <button  mat-raised-button  color="primary">Next</button>
                  </div>
                </mat-step>
                <mat-step label="Review" state="preview">
                  <table class="table table-cart table-mobile">
                    <thead>
                      <tr>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Total</th>
                        <th></th>
                      </tr>
                    </thead>

                    <tbody *ngIf="basket$ | async as basket">
                      <tr *ngFor="let item of basket.items">
                        <td class="product-col">
                          <div class="product">
                            <figure class="product-media">
                              <a href="#">
                                <img
                                  src="{{item.image}}"
                                  alt="Product image"
                                />
                              </a>
                            </figure>

                            <h3 class="product-title">
                              <a href="#">{{item.title}}</a>
                            </h3>
                            <!-- End .product-title -->
                          </div>
                          <!-- End .product -->
                        </td>
                        <td class="price-col">{{item.price |  currency }}</td>
                        <td class="quantity-col">
                          <div class="cart-product-quantity">
                            <div class="input-group input-spinner bg-info">

                              <input
                                type="text"
                                style="text-align: center"
                                class="form-control "
                                required=""
                                placeholder=""
                                value="{{item.quantity}}"
                              />

                            </div>
                          </div>
                          <!-- End .cart-product-quantity -->
                        </td>
                        <td class="total-col">{{ item.price | multiplication: item.quantity | currency }}</td>

                      </tr>

                    </tbody>
                  </table>
                  <div class="mt-3">
                    <button mat-raised-button matStepperNext color="primary" class="mr-2">Next</button>
                    <button mat-raised-button matStepperPrevious color="primary">Back</button>
                  </div>
                </mat-step>
                <mat-step label="Payment" state="payment">
                  <app-checkout-payment></app-checkout-payment>
                  <div class="mt-3">
                    <button class="mainBackColor" mat-raised-button matStepperNext   class="mr-2">
                      Confirm
                    </button>
                    <button mat-raised-button matStepperPrevious color="primary">
                      Back
                    </button>
                  </div>
                </mat-step>
                <mat-step label="Done" state="Done">
                  <label>Thank you for your order</label>
                  <div class="mt-3">
                    <button mat-raised-button matStepperPrevious color="primary">Back</button>
                  </div>
                </mat-step>

                  <ng-template matStepperIcon="home">
                    <mat-icon>home</mat-icon>
                  </ng-template>
                  <ng-template matStepperIcon="delivery">
                    <mat-icon>airport_shuttle</mat-icon>
                  </ng-template>

                  <ng-template matStepperIcon="payment">
                    <mat-icon>payments</mat-icon>
                  </ng-template>
                  <ng-template matStepperIcon="Done">
                    <mat-icon>check_circle</mat-icon>
                  </ng-template>
                </mat-horizontal-stepper>
              </div>
              <!-- End .col-lg-9 -->
              <aside class="col-lg-3">
                <div class="summary">
                  <h3 class="summary-title">Your Order</h3>
                  <!-- End .summary-title -->

                  <table class="table table-summary">
                    <thead>
                      <tr>
                        <th>Product</th>
                        <th>Total</th>
                      </tr>
                    </thead>

                    <tbody *ngIf="basket$ | async as basket">
                      <tr *ngFor="let item of basket.items">
                        <td>
                          <a>{{ item.title }}</a>
                        </td>
                        <td>{{ item.price | currency }}</td>
                      </tr>

                      <tr class="summary-subtotal">
                        <td>Subtotal:</td>
                        <td>{{ basket.items | totalPrice | currency }}</td>
                      </tr>
                      <!-- End .summary-subtotal -->
                      <tr>
                        <td>Shipping:</td>

                        <td>{{selectedDeliveryMethod}}</td>
                      </tr>
                      <tr class="summary-total">
                        <td>Total:</td>
                        <td>{{ basket.items | totalPriceIncludingShipping:selectedDeliveryMethodPrice | currency }}</td>
                      </tr>
                      <!-- End .summary-total -->
                    </tbody>
                  </table>
                  <!-- End .table table-summary -->

                  <div class="accordion-summary" id="accordion-payment">
                    <div class="card">
                      <div class="card-header" id="heading-1">
                        <h2 class="card-title">
                          <a
                            role="button"
                            data-toggle="collapse"
                            href="#collapse-1"
                            aria-expanded="true"
                            aria-controls="collapse-1"
                          >
                            Direct bank transfer
                          </a>
                        </h2>
                      </div>
                      <!-- End .card-header -->
                      <div
                        id="collapse-1"
                        class="collapse show"
                        aria-labelledby="heading-1"
                        data-parent="#accordion-payment"
                      >
                        <div class="card-body">
                          Make your payment directly into our bank account.
                          Please use your Order ID as the payment reference.
                          Your order will not be shipped until the funds have
                          cleared in our account.
                        </div>
                        <!-- End .card-body -->
                      </div>
                      <!-- End .collapse -->
                    </div>
                    <!-- End .card -->

                    <div class="card">
                      <div class="card-header" id="heading-2">
                        <h2 class="card-title">
                          <a
                            class="collapsed"
                            role="button"
                            data-toggle="collapse"
                            href="#collapse-2"
                            aria-expanded="false"
                            aria-controls="collapse-2"
                          >
                            Check payments
                          </a>
                        </h2>
                      </div>
                      <!-- End .card-header -->
                      <div
                        id="collapse-2"
                        class="collapse"
                        aria-labelledby="heading-2"
                        data-parent="#accordion-payment"
                      >
                        <div class="card-body">
                          Ipsum dolor sit amet, consectetuer adipiscing elit.
                          Donec odio. Quisque volutpat mattis eros. Nullam
                          malesuada erat ut turpis.
                        </div>
                        <!-- End .card-body -->
                      </div>
                      <!-- End .collapse -->
                    </div>
                    <!-- End .card -->

                    <div class="card">
                      <div class="card-header" id="heading-3">
                        <h2 class="card-title">
                          <a
                            class="collapsed"
                            role="button"
                            data-toggle="collapse"
                            href="#collapse-3"
                            aria-expanded="false"
                            aria-controls="collapse-3"
                          >
                            Cash on delivery
                          </a>
                        </h2>
                      </div>
                      <!-- End .card-header -->
                      <div
                        id="collapse-3"
                        class="collapse"
                        aria-labelledby="heading-3"
                        data-parent="#accordion-payment"
                      >
                        <div class="card-body">
                          Quisque volutpat mattis eros. Lorem ipsum dolor sit
                          amet, consectetuer adipiscing elit. Donec odio.
                          Quisque volutpat mattis eros.
                        </div>
                        <!-- End .card-body -->
                      </div>
                      <!-- End .collapse -->
                    </div>
                    <!-- End .card -->

                    <div class="card">
                      <div class="card-header" id="heading-4">
                        <h2 class="card-title">
                          <a
                            class="collapsed"
                            role="button"
                            data-toggle="collapse"
                            href="#collapse-4"
                            aria-expanded="false"
                            aria-controls="collapse-4"
                          >
                            PayPal
                            <small class="float-right paypal-link"
                              >What is PayPal?</small
                            >
                          </a>
                        </h2>
                      </div>
                      <!-- End .card-header -->
                      <div
                        id="collapse-4"
                        class="collapse"
                        aria-labelledby="heading-4"
                        data-parent="#accordion-payment"
                      >
                        <div class="card-body">
                          Nullam malesuada erat ut turpis. Suspendisse urna
                          nibh, viverra non, semper suscipit, posuere a, pede.
                          Donec nec justo eget felis facilisis fermentum.
                        </div>
                        <!-- End .card-body -->
                      </div>
                      <!-- End .collapse -->
                    </div>
                    <!-- End .card -->

                    <div class="card">
                      <div class="card-header" id="heading-5">
                        <h2 class="card-title">
                          <a
                            class="collapsed"
                            role="button"
                            data-toggle="collapse"
                            href="#collapse-5"
                            aria-expanded="false"
                            aria-controls="collapse-5"
                          >
                            Credit Card (Stripe)
                            <img
                              src="assets/images/payments-summary.png"
                              alt="payments cards"
                            />
                          </a>
                        </h2>
                      </div>
                      <!-- End .card-header -->
                      <div
                        id="collapse-5"
                        class="collapse"
                        aria-labelledby="heading-5"
                        data-parent="#accordion-payment"
                      >
                        <div class="card-body">
                          Donec nec justo eget felis facilisis fermentum.Lorem
                          ipsum dolor sit amet, consectetuer adipiscing elit.
                          Donec odio. Quisque volutpat mattis eros. Lorem ipsum
                          dolor sit ame.
                        </div>
                        <!-- End .card-body -->
                      </div>
                      <!-- End .collapse -->
                    </div>
                    <!-- End .card -->
                  </div>
                  <!-- End .accordion -->

                  <button
                    type="submit"
                    class="btn btn-outline-primary-2 btn-order btn-block"
                  >
                    <span class="btn-text">Place Order</span>
                    <span class="btn-hover-text">Proceed to Checkout</span>
                  </button>
                </div>
                <!-- End .summary -->
              </aside>
              <!-- End .col-lg-3 -->
            </div>
            <!-- End .row -->
          </form>
        </div>
        <!-- End .container -->
      </div>
      <!-- End .checkout -->
    </div>
    <!-- End .page-content -->
  </main>
  <!-- End .main -->
</div>
<!-- End .page-wrapper -->
<button id="scroll-top" title="Back to Top">
  <i class="icon-arrow-up"></i>
</button>
